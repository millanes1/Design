--DROP Tables
DROP TABLE IF EXISTS LINE_PLANNING.LP_LABOUR;
DROP TABLE IF EXISTS LINE_PLANNING.LP_TOOL;
DROP TABLE IF EXISTS LINE_PLANNING.LP_PART;
DROP TABLE IF EXISTS LINE_PLANNING.LP_TASK;
DROP TABLE IF EXISTS LINE_PLANNING.LP_WORK_PACKAGE;
DROP TABLE IF EXISTS LINE_PLANNING.LP_AIRCRAFT;

--DROP SCHEMA
DROP SCHEMA IF EXISTS LINE_PLANNING;

--CREATE SCHEMA
CREATE SCHEMA LINE_PLANNING;

--CREATE TABLE LP_AIRCRAFT
CREATE TABLE LINE_PLANNING.LP_AIRCRAFT (
    LPAC_AC_REG_CD VARCHAR(10) NOT NULL,
    LPAC_ASSMBL_CD VARCHAR(80) NOT NULL,
    LPAC_AUTHORITY_CD VARCHAR(8) NOT NULL);
    
--CREATE COMMENT LP_AIRCRAFT
COMMENT ON TABLE LINE_PLANNING.LP_AIRCRAFT IS 'Table for entity AIRCRAFT';
COMMENT ON COLUMN LINE_PLANNING.LP_AIRCRAFT.LPAC_AC_REG_CD IS 'Identifier for TAIL';
COMMENT ON COLUMN LINE_PLANNING.LP_AIRCRAFT.LPAC_ASSMBL_CD IS 'Identifier for FLEET';
COMMENT ON COLUMN LINE_PLANNING.LP_AIRCRAFT.LPAC_AUTHORITY_CD IS 'Identifier for OPERATOR';

--CREATE PRIMARY KEY LP_AIRCRAFT
ALTER TABLE LINE_PLANNING.LP_AIRCRAFT ADD PRIMARY KEY (LPAC_AC_REG_CD);

--CREATE UNIQUE INDEX LP_AIRCRAFT
CREATE UNIQUE INDEX INDX_LPAC_AC_REG_CD ON LINE_PLANNING.LP_AIRCRAFT (LPAC_AC_REG_CD);


--CREATE TABLE LP_WORK_PACKAGE
CREATE TABLE LINE_PLANNING.LP_WORK_PACKAGE (
    LPWP_BARCODE VARCHAR(80) NOT NULL, 
    LPWP_NAME VARCHAR(500) NOT NULL,
    LPWP_STATUS VARCHAR(12) NOT NULL,
    LPWP_LOCATION VARCHAR(2000), --MXI have this Long, i think that exagerate
    LPWP_DATE_TIME_START DATE,
    LPWP_DATE_TIME_END DATE);

--CREATE COMMENT LP_WORK_PACKAGE
COMMENT ON TABLE LINE_PLANNING.LP_WORK_PACKAGE IS 'Table for entity WORK PACKAGE';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_BARCODE IS 'Visual identifier of a Work Package';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_NAME IS 'Name of a Work Package';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_STATUS IS 'Status of Work Package from MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_LOCATION IS 'Location where it programming work package for you execution';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_DATE_TIME_START IS 'Date and time off works start';
COMMENT ON COLUMN LINE_PLANNING.LP_WORK_PACKAGE.LPWP_DATE_TIME_END IS 'Date and time off works finish';

--CREATE PRIMARY KEY LP_WORK_PACKAGE
ALTER TABLE LINE_PLANNING.LP_WORK_PACKAGE ADD PRIMARY KEY (LPWP_BARCODE);

--CREATE UNIQUE INDEX LP_WORK_PACKAGE
CREATE UNIQUE INDEX INDX_LPWP_BARCODE ON LINE_PLANNING.LP_WORK_PACKAGE (LPWP_BARCODE);

--CREATE TABLE LP_TASK
CREATE TABLE LINE_PLANNING.LP_TASK (
    LPTK_CODE SERIAL NOT NULL,
    LPTK_BARCODE VARCHAR(80) NOT NULL, 
    LPTK_CODE_MXI DECIMAL(10) NOT NULL,
    LPAC_AC_REG_CD VARCHAR(10) NOT NULL,
    LPWP_BARCODE VARCHAR(80) NOT NULL,
    LPTK_NAME VARCHAR(500) NOT NULL,
    LPTK_STATUS VARCHAR(12) NOT NULL, 
    LPTK_TASK_TYPE VARCHAR(16) NOT NULL,
    LPTK_DUE_DATE DATE NOT NULL,
    LPTK_DUE_DATE_EXT DATE,
    LPTK_DUE_DATE_FNL DATE NOT NULL,
    LPTK_YIELD FLOAT(53),
    LPTK_DURATION FLOAT(53) NOT NULL,
    LPTK_BARCODE_DVR VARCHAR(80),
    LPTK_DUE_DATE_DVR DATE,
    LPTK_PRIORITY DECIMAL(2),
    LPTK_SCHED_STATUS VARCHAR(30));

--CREATE COMMENT LP_TASK
COMMENT ON TABLE LINE_PLANNING.LP_TASK IS 'Table for entity TASK';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_CODE IS 'Identifier of a task in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_BARCODE IS 'Visual identifier of a task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_CODE_MXI IS 'Code of identifier of a task in MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPAC_AC_REG_CD IS 'Registration code of an aircraft';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPWP_BARCODE IS 'Visual identifier of a Work Package';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_NAME IS 'Name of a task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_STATUS IS 'Status of task from MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_TASK_TYPE IS 'Classification the type of Task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_DUE_DATE IS 'Date of defined limit for execution of task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_DUE_DATE_EXT IS 'Date extended of defined limit for execution of task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_DUE_DATE_FNL IS 'Date of defined limit for execution of task, attribute for product "Line Planning" where use for filter of information';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_YIELD IS 'Percent of programming ideal minimum for a task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_DURATION IS 'Duration that has a task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_BARCODE_DVR IS 'Visual identifier of a Driving task';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_PRIORITY IS 'Value that identifies a concept global priority ';
COMMENT ON COLUMN LINE_PLANNING.LP_TASK.LPTK_SCHED_STATUS IS 'estado de la tarea en line Planning';
   
--CREATE PRIMARY KEY LP_TASK
ALTER TABLE LINE_PLANNING.LP_TASK ADD PRIMARY KEY (LPTK_CODE);

--CREATE UNIQUE INDEX LP_TASK
CREATE UNIQUE INDEX INDX_LPTK_BARCODE ON LINE_PLANNING.LP_TASK (LPTK_BARCODE);
CREATE UNIQUE INDEX INDX_LPTK_CODE_MXI ON LINE_PLANNING.LP_TASK (LPTK_CODE_MXI);

--CREATE INDEX LP_TASK
CREATE INDEX INDX_LPTK_DUE_DATE_FNL ON LINE_PLANNING.LP_TASK (LPTK_DUE_DATE_FNL);
CREATE INDEX INDX_LPTK_DUE_DATE_DVR ON LINE_PLANNING.LP_TASK (LPTK_DUE_DATE_DVR);

--CREATE INDEX FK LP_PART 
CREATE INDEX INDX_FK_LPTK_LPAC_AC_REG_CD ON LINE_PLANNING.LP_TASK (LPAC_AC_REG_CD);
CREATE INDEX INDX_FK_LPTK_LPWP_BARCODE ON LINE_PLANNING.LP_TASK (LPWP_BARCODE);


--CREATE TABLE LP_LABOUR
CREATE TABLE LINE_PLANNING.LP_LABOUR (
    LPLB_CODE SERIAL NOT NULL,
    LPTK_CODE DECIMAL NOT NULL,
    LPLB_SKILL VARCHAR(12) NOT NULL,
    LPLB_MAN_REQUIRED DECIMAL(10) NOT NULL,
    LPLB_MAN_HR DECIMAL(6,2) NOT NULL);


--CREATE COMMENT LP_LABOUR
COMMENT ON TABLE LINE_PLANNING.LP_LABOUR IS 'Table for entity LABOUR';
COMMENT ON COLUMN LINE_PLANNING.LP_LABOUR.LPLB_CODE IS 'Identifier of a labour in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_LABOUR.LPTK_CODE IS 'Identifier of a task in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_LABOUR.LPLB_SKILL IS 'Ability required for labour execution';
COMMENT ON COLUMN LINE_PLANNING.LP_LABOUR.LPLB_MAN_REQUIRED IS 'People required for labour execution';
COMMENT ON COLUMN LINE_PLANNING.LP_LABOUR.LPLB_MAN_HR IS 'Man hours required for labour execution';

--CREATE PRIMARY KEY LP_LABOUR
ALTER TABLE LINE_PLANNING.LP_LABOUR ADD PRIMARY KEY (LPLB_CODE);

--CREATE INDEX LP_LABOUR 
CREATE INDEX INDX_LPLB_SKILL ON LINE_PLANNING.LP_LABOUR (LPLB_SKILL);

--CREATE INDEX FK LP_LABOUR 
CREATE INDEX INDX_FK_LPLB_LPTK_CODE ON LINE_PLANNING.LP_LABOUR (LPTK_CODE);


--CREATE TABLE LP_TOOL
CREATE TABLE LINE_PLANNING.LP_TOOL (
    LPTL_CODE SERIAL NOT NULL,
    LPTK_CODE DECIMAL NOT NULL,
    LPTL_CODE_MXI DECIMAL(10) NOT NULL,
    LPTL_NAME VARCHAR(80) NOT NULL, --This field is candidate for new entity of tool availability (Inventory)
    LPTL_QUANTITY FLOAT(53) NOT NULL);

--CREATE COMMENT LP_TOOL
COMMENT ON TABLE LINE_PLANNING.LP_TOOL IS 'Table for entity TOOL';
COMMENT ON COLUMN LINE_PLANNING.LP_TOOL.LPTL_CODE IS 'Identifier of a tool in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_TOOL.LPTK_CODE IS 'Identifier of a task in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_TOOL.LPTL_CODE_MXI IS 'Code of identifier of a tool in MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_TOOL.LPTL_NAME IS 'Name of a tool';
COMMENT ON COLUMN LINE_PLANNING.LP_TOOL.LPTL_QUANTITY IS 'Quantity required of the tool';

--CREATE PRIMARY KEY LP_TOOL
ALTER TABLE LINE_PLANNING.LP_TOOL ADD PRIMARY KEY (LPTL_CODE);

--CREATE INDEX FK LP_TOOL 
CREATE INDEX INDX_FK_LPTL_LPTK_CODE ON LINE_PLANNING.LP_TOOL (LPTK_CODE);


--CREATE TABLE LP_PART
CREATE TABLE LINE_PLANNING.LP_PART (
    LPPT_CODE SERIAL NOT NULL,
    LPTK_CODE DECIMAL NOT NULL,
    LPPT_CODE_MXI DECIMAL(10) NOT NULL,
    LPPT_CODE_MXI_GROUP DECIMAL(10) NOT NULL,
    LPPT_STATUS VARCHAR(12) NOT NULL,
    LPTT_QUANTITY FLOAT(53) NOT NULL,
    LPTT_DATE_ETA DATE);


--CREATE COMMENT LP_PART
COMMENT ON TABLE LINE_PLANNING.LP_PART IS 'Table for entity Part';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPPT_CODE IS 'Identifier of a part in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPTK_CODE IS 'Identifier of a task in the product Line Planning';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPPT_CODE_MXI IS 'Code of identifier of a part in MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPPT_CODE_MXI_GROUP IS 'Code of identifier of a group of part in MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPPT_STATUS IS 'Status of part from MXI';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPTT_QUANTITY IS 'Quantity required of the part';
COMMENT ON COLUMN LINE_PLANNING.LP_PART.LPTT_DATE_ETA IS 'Date estimated arrival of part';

--CREATE PRIMARY KEY LP_PART
ALTER TABLE LINE_PLANNING.LP_PART ADD PRIMARY KEY (LPPT_CODE);

--CREATE INDEX LP_PART 
CREATE INDEX INDX_LPTT_DATE_ETA ON LINE_PLANNING.LP_PART (LPTT_DATE_ETA);

--CREATE INDEX FK LP_PART 
CREATE INDEX INDX_FK_LPTT_LPTK_CODE ON LINE_PLANNING.LP_PART (LPTK_CODE);
